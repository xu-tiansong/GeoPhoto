我现在要做一个基于Electron开发的个人照片管理系统，这个系统的特点是根据时间轴和地理位置信息管理照片目录里面的所有照片和视频文件，需要具有如下功能：
1. 自动扫描目录里所有的照片和视频文件，在本地建立一个轻量级的照片信息数据库，针对每一个照片记录，保存如下信息：
	a. 照片文件地址
	b. 照片拍摄时间
	c. 照片拍摄坐标
	d. 备注信息
	e. tags
2. 系统主界面是一张可以缩放的地图，比例尺最大时是一张世界地图，最小可放大到街区和房子（如果能有免费的卫星照片更好），地图占满主界面的所有宽度和从顶部开始的几乎所有高度，在主界面的最下方是一根时间轴，时间轴刻度可以是日，周，月，年，在时间轴上有一根bar，地图上根据bar覆盖的时间范围，在照片对应位置显示照片数量，在地图上设定像素内（比如长宽为15个像素的正方形）的照片数量以数字的形式显示在地图上。可以通过鼠标选取地图上某一个矩形区域选择照片，一旦选定一个矩形区域，这个矩形区域的下方出现一根滚动条，滚动条代表主界面时间轴上bar覆盖的时间范围，滚动条从左向右滚动，矩形区域按照时间顺序显示被其覆盖的所有照片和录像



关于时间滚动条，我需要一个特制的滚动条，这根滚动条doc在主屏幕的下方，高度为28个像素。滚动条分为上下两行，都是是有刻度的，下面一行刻度的精度有每个刻度一小时；每个刻度一天和每个刻度一个月三档。通过鼠标上下滚动切换，默认为每个刻度一小时。当下面一行刻度为小时时，每个刻度文字为24时制的数字，上面一行以天为一个跨度，文字显示当日的日期和星期几；当下面一行刻度为天时，每个刻度文字显示当日为该月的第几天，上面一个行以月为跨度，文字显示当月的月份；当下面一行刻度为月时，每个刻度文字显示这是几月份，用英文三个字母的缩写表示，上面一行以年为跨度，文字显示当年年份，滚动条的滚动bar在时间轴上的跨度代表一个时间范围，有三种拖动方式，当鼠标停留在滚动bar左侧边缘时候，可以通过左右拖动来调整时间跨度的开始时间，当鼠标停留在滚动bar右侧边缘时候，可以通过左右拖动来调整时间跨度的结束时间，当鼠标停留在滚动bar上的时候，可以通过左右拖动来整体移动时间范围。当鼠标停留在滚动条非滚动bar区域的时候，可以通过左右拖动来整体移动时间轴

我已经看到了时间滚动条，现在需要以下修改：
1. 调整高度，调整为56个像素
2. 滚动条没有显示任何刻度，我需要滚动条默认按照每个刻度一天来显示，即下面一行的刻度为天，每个刻度文字显示当日为该月的第几天，上面一行以月为跨度，文字显示当月的月份
3. 滚动条默认显示从今天开始往前倒推n天，具体n是几天取决于主屏幕宽度能够显示多少刻度
3. 滚动bar停留在时间滚动条的右侧，默认覆盖7天


我没有看到刻度，我需要下面一行以28个像素为一个刻度显示每一天为该月第几天的数字，上面一行以月为跨度，在每月1号进行分割，并显示这是哪一年的什么月份

1. 让时间滚动条贴合在主窗体的地步，剩下的空间位置用地图占满
2. 窗体调整宽度的时候时间滚动条没有刷新，如果滚动条左右侧已经是最新的日期或者时间，则需要让整个时间滚动条右移
3. 滚动bar左右段要正好落在下面一行的刻度线上，而不是随便定位
4. 鼠标落在非滚动bar的时候变成手的图标，当拖动整个时间滚动条时，鼠标变成握拳的手势


1. 扫描文件的时候，屏幕整体变暗，中间出现等待动画
2. 已经存在的文件不再重复扫描
3. 扫描完成之后提示一共有多少照片和视频，其中多少是新增的

当程序启动的时候，显示上次关闭程序时的地图尺寸和位置，地图和时间滚动条load完成以后，异步读取在滚动bar cover的时间段里面的照片，并在地图上标注位置，注意这是异步的，不影响我的地图操作

现在地图上每一张照片都有一个图钉，鼠标移动到这个图钉的时候，显示这张照片的缩略图，缩略图保持原始照片或者视频的长宽比例，如果是一张横幅照片，缩略图宽度168个像素，高度保持相应比例，如果不是一张横幅照片，缩略图高度168个像素，宽度保持相应比例，如果是一个视频，则在缩略图正中间显示一个播放图标


菜单设计
1. 照片
	1.1 导入照片目录
	1.2 照片目录管理
	1.3 照片标签管理（人物，场景，事件）
	1.4 照片打包备份
	1.5 幻灯片播放
	1.6 连拍筛选
	1.7 照片识别（贴标签）

2. 时间轴
	2.1 时间轴设定
	2.2 时间跨度设定

3. 地图设定
	3.1 地标管理
	3.2 图层设定
	3.3 离线地图
	3.4 旅行轨迹

4. 系统
	4.1 全屏地图
	4.2 语言设定
	4.3 关于
	4.4 退出


添加一个类，单独文件PhotoWindow.js，当点击一个图钉是照片时，弹出这个查看大图的窗体，窗体长宽比主窗体各小112个像素，在主窗体里面居中，并跟着主窗体的大小变化，始终保持跟主窗体的边距不变。这个窗体的左边是一个照片的容器，照片可以在里面放大缩小，如果照片尺寸超出了容器，可以通过鼠标拖动来移动照片，窗体的右侧是另一个容器，容器的顶部是一个tab，分别是“Info”，“Similar Photos”，“Tags”，整个窗体的右上角是一个红色X的关闭按钮，点击可关闭窗体。这个窗体抢占前台，在这个窗体关闭前，主窗体的所有功能都不能用，包括菜单

添加一个类，单独文件PhotosManageWindow.js，窗体长宽比主窗体小224个像素，在主窗体里面居中，窗体左侧是一个容器，容器顶部是一个tab，分别是Direct，Selected，Tag，窗体启动的时候由参数决定选中哪个tab。窗体右侧是一个容器，容器里面显示一组以时间顺序排列照片或视频的缩略图，每一个缩略图撑满一个224像素的正方形，鼠标选中的照片边框会变蓝。当用户在地图上画一个矩形并且有选中的照片时，打开这个PhotosManageWindow，让tab状态为Selected，所有选中的照片显示在右侧容器里

添加一个类，TimeLineSettingWindow.js，窗体400x200px，独占居中，右上角有关闭图标。窗体上方分两个Tab，分别是Time Line和Time Range，窗体右下方是取消和确定按钮，Time Line tab内有三个一组的单选框，分别是Hourly, Daily和Monthly，默认根据时间滚动条当前的状态选择其中一个，可调整，Time Range tab里面根据Time Line的状态分别是某日某时到某日某时，某日到某日和某年月到某年月，按确定时先进行时间范围的合理性判断，如果范围合理，则调整屏幕底部时间滚动条的状态并一如既往记住这个状态




照片的Tag可以分为四种，第一种标记人物，以脸部特征区分不同的人，类别是face，第二种标记事件，可以是一次旅行或者一个派对，一个会议，一次巡诊，具备开始和结束时间，第三种标记为地标，具有具体的地理位置信息，最后一种是其他标记，四种标记都可以分层，具体参照Database.js里面的数据表结构，请创建一个基类Tag，并根据具体信息创建四种Tag的子类


添加一个类，单独文件TagManageWindow.js，窗体1024*600，独占居中，右上角有关闭图标。窗体分左右容器，左侧容器380宽，容器上方是四个tab分别是Faces，Events，Locations和Common，默认停留在Faces上面，左侧容器的剩余部分是一个树状结构的，可以添加，修改，移动和删除节点，每个节点代表一个tag，tab的选择决定了下面所有tag的category。窗体右边容器分为上下两个部分，上面是tag的通用信息，包括tag的name，remark，颜色，下面部分根据左侧tab分别设置不同信息，可稍后完成这部分功能

在Tag管理屏幕的人物分类中，只有最末端tag可以设置人脸识别内容，一旦设置了人脸识别内容，则不能再生成下级tag，当选中一个末端人物tag，先判断该人物是否已经有人脸识别信息，如果有则将这个人物的肖像缩略图（64×64）显示在容器里面，并提供重新识别按钮，如果该人物没有人脸识别信息，提供人脸识别方案，具体允许用户拖三张包含该人物的单人照片进三个图片框，点击按钮开始识别，返回是否识别成功，并生成64×64的缩略图，缩略图以字串形式存入数据库，容器返回只有人脸识别信息的状态


时间bar和实际时间跨度不匹配，打开app，时间bar显示1月8日到26日，时间轴设置里面的时间范围是1月9日到27日

标签管理，右侧容器上半部分，去除“标签信息”，将名称跟颜色同行，颜色不用显示颜色值，只需要点击更改就行了，占据该行右侧，剩余部分都给名称输入框

标签管理的地标tag针对选中地标，右侧容器下半部分显示一张可拖曳和缩放的地图，地图下方一个数字输入框输入覆盖半径，以米为单位，默认10米，输入框右侧是保存按钮，当用户点击地图某一个位置，在这个位置为圆心，以输入的覆盖半径画一个圆，圆形内测用半透明红色填充，按保存按钮保存到数据库

新建一个类，TagSelectWindow.js文件，参照标签管理屏幕的左侧容器，窗体上方是四个tab是四种category，选中后下方是该category树状结构的tag，选定tag按确定关闭这个窗口。照片屏幕的标签tab按“添加标签”按钮弹出TagSelectWindow进行选择，tag的右上角带一个小的x，按这个tag删除它

标签管理，给事件tag添加一个新的属性，就是地标tag，在右侧容器的下半部分，可以选择一个地标tag，表示这个事件发生的地点，也可以为空不设置

在照片窗体的标签tab里，添加一个“匹配标签”按钮，按这个按钮根据以下规则查找：
1：如果照片里面人物跟faces tag匹配则添加该人物标签
2：如果照片时间在某一个事件tag时间段内，且照片的位置在这个事件tag的地标tag半径范围内，则给这张照片添加该事件tag
3：如果有了事件tag，查找该照片的位置是否在事件tag关联地标tag的子孙tag覆盖半径里面，如果在，则将这个子孙tag添加给这张照片，如果找不到符合条件的子孙tag，则将事件tag关联地标tag添加给照片